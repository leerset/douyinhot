<%= form_for @category_formula do |f| %>
  <div id='category_formula-form'>
    <%= render 'shared/error_messages', object: f.object %>
    <div class='row'>
      <div class='col-md-12'>
        <%= f.label :category_number, '品类' %>
        <%= f.select :category_number, Category.all.map{|g| [g.category_name, g.category_number]}.to_h, { include_blank: '选择一个品类' }, { class: 'form-control', id: 'category-select', 'data-qa': 'form-category-dropdown'} %>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-12'>
        <%= f.label :formula, '公式' %>
        <%= f.text_field :formula, { required: '', 'data-parsley-maxlength': Constants::MAX_STRING_LEN, class: 'form-control' } %>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-12'>
        <span>x的值:&nbsp;</span><input id='calculate_x' type='number'></input>
        <btn id='calculate' class='btn btn-primary' onclick='calculate()'>计算</btn>
        <span>结果:&nbsp;</span><input id='calculate_result' type='text'></input>
      </div>
    </div>
    <div class='row'>
      <div class='col-md-12'>
        <%= f.label :top_limit, '上限' %>
        <%= f.number_field :top_limit, { required: '', 'data-parsley-maxlength': Constants::MAX_STRING_LEN, class: 'form-control' } %>
      </div>
    </div>
    <div class='row'>&nbsp;</div>
    <div class='row form-btn-container'>
      <div class='col-md-12'>
        <%= f.submit yield(:button_text), class: 'btn btn-primary' %>
        <%= link_to '取消', category_formulas_path, class: 'btn btn-cancel' %>
      </div>
    </div>
  </div>
<% end %>
